<div class="pbx_input_wrap" [@Fade]>
    <div [ngClass]="[labelPosition !== 'top' ? 'pbx_input_item' : 'pbx_input_row']">

        <div [ngClass]="[labelPosition !== 'top' ? 'pbx_input_item_label' : 'pbx_input_row_label']">
            <span>{{name}}</span>
        </div>

        <div [ngClass]="[labelPosition !== 'top' ? 'pbx_input_item_input_wrap' : 'pbx_input_row_input_wrap']">

            <div *ngIf="!form"
                 [ngClass]="[labelPosition !== 'top' ? 'pbx_input_item_input_wrap' : 'pbx_input_row_input_wrap', inputClass]">

                <input *ngIf="!options && !checkbox"
                       class="{{singleBorder ? '' : 'show-border'}} {{checkError() ? 'error-border' : ''}}"
                       [type]="type"
                       [id]="key"
                       [placeholder]="placeholder"
                       [(ngModel)]="value"
                       [ngClass]="[checkError() ? 'ng-invalid ng-touched' : 'ng-valid']"
                       (keyup)="inputKeyUp($event)"
                       (focus)="setFocus()"
                       (blur)="removeFocus()">

                <pbx-select *ngIf="options"
                            [name]="key"
                            [singleBorder]="singleBorder"
                            [options]="options"
                            [objectKey]="displayKey"
                            [selected]="value"
                            (onSelect)="selectItem($event)"
                            [errors]="checkError()"
                            [placeholder]="placeholder"
                            (onFocus)="setFocus()"
                            (onBlur)="removeFocus()">
                </pbx-select>

                <pbx-checkbox *ngIf="checkbox"
                              [id]="key"
                              (onToggle)="toggleCheckbox($event)"
                              [value]="value">
                </pbx-checkbox>

                <span *ngIf="description">{{description}}</span>

            </div>

            <div *ngIf="form"
                 [formGroup]="object"
                 [ngClass]="['pbx_input_item_input_wrap', inputClass]">

                <input *ngIf="!options && !checkbox"
                       [ngClass]="{'show-border': !singleBorder}"
                       [type]="type"
                       [id]="key"
                       [placeholder]="placeholder"
                       [title]="name"
                       [formControlName]="[key]"
                       (keyup)="inputKeyUp($event)"
                       (focus)="setFocus()"
                       (blur)="removeFocus()">

                <pbx-checkbox *ngIf="checkbox"
                              [id]="key"
                              (onToggle)="toggleCheckbox($event)"
                              [value]="value">
                </pbx-checkbox>

                <pbx-select *ngIf="options"
                            [name]="key"
                            [singleBorder]="singleBorder"
                            [options]="options"
                            [objectKey]="displayKey"
                            [selected]="value"
                            (onSelect)="selectItem($event)"
                            [errors]="checkError()"
                            [placeholder]="placeholder"
                            (onFocus)="setFocus()"
                            (onBlur)="removeFocus()">
                </pbx-select>

                <span *ngIf="description" [ngClass]="[descriptionClass ? descriptionClass : '']">{{description}}</span>

            </div>

            <ng-content></ng-content>

        </div>

        <span *ngIf="checkError()"
              #errorSpan
              [ngClass]="[floatError ? (errorVisible ? (labelPosition !== 'top' ? 'pbx_input_error_float_left_focus' : 'pbx_input_error_float_focus') : 'pbx_input_error_float') : 'pbx_input_error']"
        >{{checkError(true)}}</span>

    </div>
</div>