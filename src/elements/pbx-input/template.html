<div *ngIf="!loading" class="pbx_input_wrap" [@Fade]>
    <div [ngClass]="[labelPosition !== 'top' ? 'pbx_input_item' : 'pbx_input_row']">

        <div [ngClass]="[labelPosition !== 'top' ? 'pbx_input_item_label' : 'pbx_input_row_label', checkError() ? 'error-text' : '']">
            <span>{{name}}</span>
            <span class="required" *ngIf="required">*</span>
        </div>

        <div [ngClass]="[labelPosition !== 'top' ? 'pbx_input_item_input_wrap' : 'pbx_input_row_input_wrap']" #inputDiv>

            <div *ngIf="!form"
                 [ngClass]="[labelPosition !== 'top' ? 'pbx_input_item_input_wrap' : 'pbx_input_row_input_wrap', inputClass]">

                <input *ngIf="!options && !checkbox"
                       class="{{singleBorder ? '' : 'show-border'}} {{checkError() ? 'error-border' : ''}}"
                       [type]="type"
                       [id]="key"
                       [placeholder]="placeholder"
                       [(ngModel)]="value"
                       [ngClass]="[checkError() ? 'input-invalid' : 'input-valid']"
                       (keyup)="inputKeyUp($event)"
                       (focus)="setFocus()"
                       (blur)="removeFocus()"
                       (mouseenter)="mouseEnter()"
                       (mouseleave)="mouseLeave()"
                >

                <pbx-select *ngIf="options"
                            [name]="key"
                            [singleBorder]="singleBorder"
                            [options]="options"
                            [objectKey]="displayKey"
                            [selected]="value"
                            (onSelect)="selectItem($event)"
                            [errors]="checkError()"
                            [placeholder]="placeholder"
                            (onFocus)="setFocus()"
                            (onBlur)="removeFocus()"
                            (mouseenter)="mouseEnter()"
                            (mouseleave)="mouseLeave()"
                ></pbx-select>

                <pbx-checkbox *ngIf="checkbox"
                              [id]="key"
                              (onToggle)="toggleCheckbox($event)"
                              [value]="value">
                </pbx-checkbox>

                <span *ngIf="description">{{description}}</span>

            </div>

            <div *ngIf="form"
                 [formGroup]="object"
                 [ngClass]="['pbx_input_item_input_wrap', inputClass]">

                <input *ngIf="!options && !checkbox && type !== 'textarea'"
                       class="{{singleBorder ? '' : 'show-border'}} {{checkError() ? 'error-border' : ''}}"
                       [type]="type"
                       [id]="key"
                       [placeholder]="placeholder"
                       [title]="name"
                       [formControlName]="[key]"
                       (keyup)="inputKeyUp($event)"
                       (focus)="setFocus()"
                       (blur)="removeFocus()"
                       (mouseenter)="mouseEnter()"
                       (mouseleave)="mouseLeave()"
                >

                <pbx-checkbox *ngIf="checkbox"
                              [id]="key"
                              (onToggle)="toggleCheckbox($event)"
                              [value]="value">
                </pbx-checkbox>

                <pbx-select *ngIf="options"
                            [name]="key"
                            [singleBorder]="singleBorder"
                            [options]="options"
                            [objectKey]="displayKey"
                            [selected]="value"
                            (onSelect)="selectItem($event)"
                            [errors]="checkError()"
                            [placeholder]="placeholder"
                            (onFocus)="setFocus()"
                            (onBlur)="removeFocus()"
                            (mouseenter)="mouseEnter()"
                            (mouseleave)="mouseLeave()"
                ></pbx-select>

                <textarea *ngIf="type === 'textarea'"
                          class="{{singleBorder ? '' : 'show-border'}} {{checkError() ? 'error-border' : ''}}"
                          [id]="key"
                          [placeholder]="placeholder"
                          [title]="name"
                          [formControlName]="[key]"
                          [rows]="rows"
                          (keyup)="inputKeyUp($event)"
                          (focus)="setFocus()"
                          (blur)="removeFocus()"
                          (mouseenter)="mouseEnter()"
                          (mouseleave)="mouseLeave()"
                ></textarea>

                <span *ngIf="description" [ngClass]="[descriptionClass ? descriptionClass : '']">{{description}}</span>

            </div>

            <ng-content></ng-content>

        </div>

        <div *ngIf="checkError()"
              [@Swipe]
              #errorSpan
              [ngClass]="[floatError ? (getErrorVisible() || hoverActive ? (labelPosition !== 'top' ? 'pbx_input_error_float_left_focus' : 'pbx_input_error_float_focus') : 'pbx_input_error_float') : 'pbx_input_error']"
        >{{checkError(true)}}</div>

    </div>
</div>
