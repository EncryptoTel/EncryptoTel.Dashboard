<pbx-loader *ngIf="loading"></pbx-loader>

<div class="company" *ngIf="!loading && editMode">
    <pbx-form [background]="false"
              [decline]="{value: 'Cancel', buttonType: 'cancel'}"
              [confirm]="{value: 'Save', buttonType: 'success'}"
              (onDecline)="decline()"
              (onConfirm)="save()">
        <form [formGroup]="companyForm">
            <pbx-input name="Organization"
                       key="name"
                       [form]="true"
                       [required]="true"
                       [floatError]="true"
                       [errors]="service.errors"
                       [object]="companyForm">
            </pbx-input>
            <ng-container formArrayName="companyAddress">
                <ng-container *ngFor="let address of addressControls.controls;let i = index" [formGroupName]="i">
                    <pbx-input name="Country"
                               key="country"
                               displayKey="title"
                               (onSelect)="selectCountry($event)"
                               [form]="true"
                               [required]="false"
                               [floatError]="true"
                               [options]="countries"
                               [editable]="true"
                               [object]="address"
                               [errors]="service.errors"
                               [objectView]="selectedCountry"
                               objectKey="id"
                               [placeholder]="'[choose one]'">
                    </pbx-input>
                    <pbx-input name="State/Region"
                               key="regionName"
                               [form]="true"
                               [required]="false"
                               [floatError]="true"
                               [errorKey]="'companyAddress.new_0.regionName'"
                               [errors]="service.errors"
                               [object]="address">
                    </pbx-input>
                    <pbx-input name="City"
                               key="locationName"
                               [form]="true"
                               [required]="false"
                               [floatError]="true"
                               [errorKey]="'companyAddress.new_0.locationName'"
                               [errors]="service.errors"
                               [object]="address">
                    </pbx-input>
                    <pbx-input name="Street"
                               key="street"
                               [form]="true"
                               [required]="false"
                               [floatError]="true"
                               [errorKey]="'companyAddress.new_0.street'"
                               [errors]="service.errors"
                               [object]="address">
                    </pbx-input>
                    <pbx-input name="House #"
                               key="building"
                               [form]="true"
                               [required]="false"
                               [floatError]="true"
                               [errorKey]="'companyAddress.new_0.building'"
                               [errors]="service.errors"
                               [object]="address">
                    </pbx-input>
                    <pbx-input name="Office"
                               key="office"
                               [form]="true"
                               [floatError]="true"
                               [required]="false"
                               [errorKey]="'companyAddress.new_0.office'"
                               [errors]="service.errors"
                               [object]="address">
                    </pbx-input>
                    <pbx-input name="Postal code"
                               key="postalCode"
                               [form]="true"
                               [floatError]="true"
                               [required]="false"
                               [errorKey]="'companyAddress.new_0.postalCode'"
                               [errors]="service.errors"
                               [object]="address">
                    </pbx-input>
                </ng-container>
            </ng-container>
            <pbx-input name="Email"
                       key="email"
                       [form]="true"
                       [floatError]="true"
                       [required]="false"
                       [errors]="service.errors"
                       [object]="companyForm">
            </pbx-input>
            <pbx-input name="Phone"
                       key="phone"
                       [form]="true"
                       [required]="false"
                       [floatError]="true"
                       [errors]="service.errors"
                       [object]="companyForm">
            </pbx-input>
            <pbx-input name="VAT ID"
                       key="vatId"
                       [form]="true"
                       [floatError]="true"
                       [required]="false"
                       [errors]="service.errors"
                       [object]="companyForm">
            </pbx-input>
        </form>
    </pbx-form>
    <pbx-sidebar [sidebarInfo]="sidebarInfo"></pbx-sidebar>
</div>

<div class="form_button_wrap" *ngIf="!loading && !editMode">
    <pbx-button [value]="'Edit'" [buttonType]="'success'" [loading]="loading" (onClick)="edit()"></pbx-button>
</div>

<div class="company_details" *ngIf="!loading && !editMode">

            <div class="item">
                <div class="img_wr">
                    <div class="inner">
                            <img src="./assets/images/avatar/company_details.png" />
                    </div> <!-- inner -->
                </div> <!-- img_wr -->
        
                <div class="mini organization">
                    <div class="title">Organization</div>
                    <div class="info">Fish food LTD</div>
                </div> <!-- mini -->
        
                <div class="mini">
                    <div class="title">Country</div>
                    <div class="info">United States</div>
                </div> <!-- mini -->
        
                <div class="mini">
                    <div class="title">State/Region</div>
                    <div class="info">San Francisco</div>
                </div> <!-- mini -->
        
                <div class="mini">
                    <div class="title">City</div>
                    <div class="info">San Francisco</div>
                </div> <!-- mini -->
        
                <div class="mini">
                    <div class="title">Street</div>
                    <div class="info">California Street</div>
                </div> <!-- mini -->
        
                <div class="mini">
                    <div class="title">House â„–</div>
                    <div class="info">17/2</div>
                </div> <!-- mini -->
        
                <div class="mini">
                    <div class="title">Office</div>
                    <div class="info">16</div>
                </div> <!-- mini -->
        
                <div class="mini">
                    <div class="title">Postal code</div>
                    <div class="info">546353</div>
                </div> <!-- mini -->
        
                <div class="mini">
                    <div class="title">Email</div>
                    <div class="info">info@expressdelivery.com</div>
                </div> <!-- mini -->
        
                <div class="mini">
                    <div class="title">Phone</div>
                    <div class="info">+1 (987) 789 65 54</div>
                </div> <!-- mini -->        
            </div> <!-- item -->
        
            <div class="item">

                <div class="big">
                    <div class="title">Information</div>

                    <div class="line">
                        <div class="key">External numbers</div>
                        <div class="val">4</div>
                    </div> <!-- line -->

                    <div class="line">
                        <div class="key">Internal numbers</div>
                        <div class="val">3</div>
                    </div> <!-- line -->
                    
                    <div class="line">
                        <div class="key">Unassigned Ext</div>
                        <div class="val">45</div>
                    </div> <!-- line -->

                    <div class="line">
                        <div class="key">Storage space</div>
                        <div class="val">1500 mb</div>
                    </div> <!-- line -->

                    <div class="line">
                        <div class="key">Available space</div>
                        <div class="val">1499 mb</div>
                    </div> <!-- line -->
                </div> <!-- big -->

                <div class="big">
                    <div class="title">Extensions</div>

                    <div class="line">
                        <div class="key">All</div>
                        <div class="val">845</div>
                    </div> <!-- line -->

                    <div class="line">
                        <div class="key">Unsorted</div>
                        <div class="val">2</div>
                    </div> <!-- line -->
                </div> <!-- big -->

                <div class="big">
                    <div class="title">IVR</div>

                    <div class="line">
                        <div class="key">Unnamed</div>
                        <div class="val">Disabled</div>
                    </div> <!-- line -->

                    <div class="line">
                        <div class="key">Sales</div>
                        <div class="val">Enabled</div>
                    </div> <!-- line -->
                </div> <!-- big -->

            </div> <!-- item -->

            <div class="item">

                <div class="big">
                    <div class="title">CDR</div>

                    <div class="line">
                        <div class="key">15:12:23</div>
                        <div class="val">&#36;210</div>
                    </div> <!-- line -->

                    <div class="line">
                        <div class="key">Incoming</div>
                        <div class="val">421</div>
                    </div> <!-- line -->

                    <div class="line">
                        <div class="key">Outgoing</div>
                        <div class="val">874</div>
                    </div> <!-- line -->

                    <div class="line">
                        <div class="key">Missed</div>
                        <div class="val">56</div>
                    </div> <!-- line -->

                    <div class="line">
                        <div class="key">No-answer</div>
                        <div class="val">48</div>
                    </div> <!-- line -->
                </div> <!-- big -->

                <div class="big">
                    <div class="title">Tariff Plan</div>

                    <div class="line">
                        <div class="key">Tariff Plan</div>
                        <div class="val">Maximum</div>
                    </div> <!-- line -->

                    <div class="line">
                        <div class="key">Next monthly payment</div>
                        <div class="val">July 23</div>
                    </div> <!-- line -->

                    <div class="line">
                        <div class="key">Estimated Payment</div>
                        <div class="val">&#36;99</div>
                    </div> <!-- line -->

                    <div class="line">
                        <div class="key">Auto-payment</div>
                        <div class="val">Enabled</div>
                    </div> <!-- line -->

                    <div class="line">
                        <div class="key">Account currency</div>
                        <div class="val">USD</div>
                    </div> <!-- line -->
                </div> <!-- big -->

                <div class="big">
                    <div class="title">Invoices</div>

                    <div class="line">
                        <div class="key">Unpaid</div>
                        <div class="val">0</div>
                    </div> <!-- line -->
                </div> <!-- big -->
            </div> <!-- item -->

            <div class="item">
                <div class="big">
                    <div class="title">Phone numbers</div>

                    <div class="number">
                        <div class="key">1000001</div>
                        <div class="val">2 of 8 ext.</div>
                        <div class="status">online</div>
                    </div> <!-- number -->

                    <div class="number">
                        <div class="key">1000002</div>
                        <div class="val">1 of 3 ext.</div>
                        <div class="status">online</div>
                    </div> <!-- number -->

                    <div class="number">
                        <div class="key">+43 14654 8458</div>
                        <div class="val"></div>
                        <div class="status">online</div>
                    </div> <!-- number -->
                </div> <!-- big -->
            </div> <!-- item -->

</div> <!-- company_details -->

<pbx-modal
        [modalEx]="modal" (onConfirmEx)="cancel()"
></pbx-modal>
