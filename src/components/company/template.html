<pbx-loader *ngIf="loading"></pbx-loader>
<div class="company" *ngIf="!loading">
    <div class="company_header">
        <pbx-button [value]="'Cancel'" [buttonType]="'cancel'" (onClick)="cancel()"></pbx-button>
        <pbx-button [value]="'Save'" [buttonType]="'success'" (onClick)="save()" [loading]="saving"></pbx-button>
    </div>
    <div class="company_contain">
        <form [formGroup]="companyForm">

            <pbx-input name="Organization"
                       key="name"
                       [form]="true"
                       [errors]="service.errors"
                       [object]="companyForm">
            </pbx-input>

            <pbx-input name="Country"
                       displayKey="title"
                       (onSelect)="selectCountry($event)"
                       [options]="countries"
                       [object]="companyForm"
                       [errors]="service.errors"
                       [objectView]="selectedCountry">
            </pbx-input>

            <ng-container formArrayName="companyAddress">
                <ng-container *ngFor="let address of addressControls.controls;let i = index" [formGroupName]="i">

                    <pbx-input name="State/Region"
                               key="regionName"
                               [form]="true"
                               [errorKey]="'companyAddress.new_0.regionName'"
                               [errors]="service.errors"
                               [object]="address">
                    </pbx-input>

                    <pbx-input name="City"
                               key="locationName"
                               [form]="true"
                               [errorKey]="'companyAddress.new_0.locationName'"
                               [errors]="service.errors"
                               [object]="address">
                    </pbx-input>

                    <pbx-input name="Street"
                               key="street"
                               [form]="true"
                               [errorKey]="'companyAddress.new_0.street'"
                               [errors]="service.errors"
                               [object]="address">
                    </pbx-input>

                    <pbx-input name="House #"
                               key="building"
                               [form]="true"
                               [errorKey]="'companyAddress.new_0.building'"
                               [errors]="service.errors"
                               [object]="address">
                    </pbx-input>

                    <pbx-input name="Office"
                               key="office"
                               [form]="true"
                               [errorKey]="'companyAddress.new_0.office'"
                               [errors]="service.errors"
                               [object]="address">
                    </pbx-input>

                    <pbx-input name="Postal code"
                               key="postalCode"
                               [form]="true"
                               [errorKey]="'companyAddress.new_0.postalCode'"
                               [errors]="service.errors"
                               [object]="address">
                    </pbx-input>

                </ng-container>
            </ng-container>

            <pbx-input name="Email"
                       key="email"
                       [form]="true"
                       [errors]="service.errors"
                       [object]="companyForm">
            </pbx-input>

            <pbx-input name="Phone"
                       key="phone"
                       [form]="true"
                       [errors]="service.errors"
                       [object]="companyForm">
            </pbx-input>

            <pbx-input name="VAT ID"
                       key="vatId"
                       [form]="true"
                       [errors]="service.errors"
                       [object]="companyForm">
            </pbx-input>

        </form>
    </div>
</div>
<pbx-sidebar [sidebarInfo]="sidebarInfo" *ngIf="!loading"></pbx-sidebar>
