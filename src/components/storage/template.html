<div class="store">
    <pbx-list *ngIf="islist"
            style="width: 100%;"
            [(pageInfo)]="service.pageInfo"
            [tableInfo]="table"
            [buttons]="buttons"
            [filters]="filters"
            [editable]="false"
            [deletable]="false"
            [multiple]="true"
            [selected]="service.select"
            [showEmptyInfo]="false"
            key="storage"
            name="Storage"
            buttonTitle="Delete Selected"
            (onLoad)="load()"
            (onCreate)="deleteSelected()"
            (onSelect)="selectItem($event.id)"
            [service]="service">
    </pbx-list>

    <div class="media-table-wrapper" *ngIf="!islist">
        <pbx-media-table
            *ngIf="!loading"
            #mediaTable
            [tableInfoEx]="table"
            [tableItems]="pageInfo.items"
            [editable]="false"
            [deletable]="false"
            (onGetMediaData)="getMediaData($event)"
            (onPageChangeEx)="getItems()"
            (onSort)="getItems()">
        </pbx-media-table>

        <pbx-loader *ngIf="loading"></pbx-loader>

        <pbx-pagination [pageInfo]="pageInfo" (onPageChangeEx)="getItems()"></pbx-pagination>
    </div>
    <pbx-sidebar *ngIf="source.select.type!=='trash'">
        <div class="store_sidebar_audio" (drop)="dropHandler($event)"
             (dragover)="dragOverHandler($event)"
             (dragend)="dragEndHandler($event)"
             (dragleave)="dragLeaveHandler($event)">
            <div class="store_sidebar_audio_icon">
                <svg-icon src="../../assets/icons/_middle/download_24px.svg"></svg-icon>
            </div>
            <div class="store_sidebar_audio_text">Drop files here to upload</div>
            <div class="store_sidebar_audio_text">or</div>
            <div class="store_sidebar_audio_select hidden_button_wrapper">
                <p class="select_file">select files</p>
                <input type="file" class="hidden_input" #fileInput (change)="sendFile($event)">
            </div>
        </div>
    </pbx-sidebar>
</div>
<pbx-modal [modalEx]="modal" (onConfirmEx)="doDeleteSelected()"></pbx-modal>
<pbx-modal [modalEx]="service.modalUpload" (onConfirmEx)="service.doUploadAction($event)"
           (onDecline)="service.cancelUploadAction()"></pbx-modal>
