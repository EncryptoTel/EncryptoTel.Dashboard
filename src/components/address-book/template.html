<div class="address_book">
  <div class="address_book_header">
    <div class="address_book_header_filters_wrap">
      <div class="address_book_header_filter">
        <label>Select Source:</label>
        <!--<pbx-select></pbx-select>-->
      </div>
      <div class="address_book_header_filter">
        <label for="search">Search</label>
        <input id="search" type="search" placeholder="Search by Name or Phone">
      </div>
    </div>
    <div class="address_book_header_controls_wrap">
      <pbx-button [buttonType]="'accent'" [value]="'import'"></pbx-button>
      <pbx-button [buttonType]="'success'" [value]="'+ New Contact'" (onClick)="newContact()"></pbx-button>
    </div>
  </div>
  <pbx-table [tableInfo]="tableInfo" [editable]="true" (onEdit)="edit($event)" (onSelect)="select($event)" [tableItems]="contacts"></pbx-table>
</div>
<pbx-sidebar *ngIf="sidebarVisible">
  <ng-container>
    <form class="sidebar_form" [formGroup]="addressForm">
      <div class="sidebar_row">
        <label for="first_name">First Name</label>
        <input type="text" id="first_name" formControlName="firstname">
      </div>
      <div class="sidebar_row">
        <label for="last_name">Last Name</label>
        <input type="text" id="last_name" formControlName="lastname">
      </div>
      <div class="sidebar_row">
        <label>Phone</label>
        <ng-container formArrayName="contactPhones">
          <ng-container *ngFor="let phoneField of contactPhones.controls; let i = index"
                        [formGroupName]="i">
            <div class="phone_field">
              <input type="text" formControlName="value" title="phone number">
              <pbx-select [options]="phoneTypes" [objectKey]="'type'" (onSelect)="selectPhoneType($event,i)" [selected]="selectedPhoneTypes[i]"></pbx-select>
              <svg-icon src="../../assets/icons/plus_13px.svg" (click)="addPhoneField()"></svg-icon>
            </div>
          </ng-container>
        </ng-container>
      </div>
      <div class="sidebar_row">
        <label>E-mail</label>
        <ng-container formArrayName="contactEmails">
          <ng-container *ngFor="let emailField of contactEmails.controls;let i = index" [formGroupName]="i">
            <div class="email_field">
              <input type="email" title="email" formControlName="value">
              <svg-icon src="../../assets/icons/plus_13px.svg" (click)="addEmailField()"></svg-icon>
            </div>
          </ng-container>
        </ng-container>
      </div>
      <div class="sidebar_row">
        <label for="company">Company Name</label>
        <input type="text" id="company" formControlName="company">
      </div>
      <div class="sidebar_row">
        <label for="department">Department</label>
        <input type="text" id="department" formControlName="department">
      </div>
      <div class="sidebar_row">
        <label for="position">Position</label>
        <input type="text" id="position">
      </div>
      <div class="sidebar_row">
        <label>Country</label>
        <pbx-select [options]="countries" [objectKey]="'title'" (onSelect)="selectCountry($event)" [selected]="selectedCountry"></pbx-select>
      </div>
      <div class="sidebar_row">
        <label for="address">Address</label>
        <ng-container formArrayName="contactAddresses">
          <ng-container [formGroupName]="0">
            <input type="text" id="address" formControlName="value">
          </ng-container>
        </ng-container>
      </div>
    </form>
    <div class="sidebar_controls">
      <pbx-button [value]="'Cancel'" [buttonType]="'cancel'" (onClick)="cancel()"></pbx-button>
      <pbx-button [value]="'Save'" [buttonType]="'success'" (onClick)="save()"></pbx-button>
    </div>
  </ng-container>
</pbx-sidebar>
